(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(55)},29:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),s=n.n(o),l=(n(29),n(1)),i=n(2),c=n(4),u=n(3),p=n(5),m=(n(31),n(8)),h=function(e){return{type:"SET_BPM",bpm:e}},d=function(e){return{type:"SET_CROSSFADE",crossfade:e}},f=function(e){return{type:"SHIFT_FROM_QUEUE",side:e}},g=function(e,t,n){return{type:"SET_CHANNEL_STATE",side:e,key:t,newValue:n}},E=function(e,t){return{type:"SET_PLAYING",side:e,playing:t}},v=function(e,t){return{type:"SET_POS",side:e,pos:t}},b=function(e,t,n){return{type:"SET_REGIONS_STATE",side:e,key:t,newValue:n}},S=(n(38),n(40),n(21)),y=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentWillReceiveProps",value:function(e){var t,n=this,r=!1;this.props.audioFile!==e.audioFile&&(this.setState({isReady:!1}),this._loadAudio(e.audioFile,e.audioPeaks),r=!0),this.props.mediaElt!==e.mediaElt&&(this.setState({isReady:!1}),this._loadMediaElt(e.mediaElt,e.audioPeaks),r=!0),this.props.audioPeaks!==e.audioPeaks&&(e.mediaElt?this._loadMediaElt(e.mediaElt,e.audioPeaks):this._loadAudio(e.audioFile,e.audioPeaks)),void 0!==e.pos&&this.state.isReady&&e.pos!==this.props.pos&&e.pos!==this.state.pos&&(r?t=this._wavesurfer.on("ready",function(){n._seekTo(e.pos),t.un()}):this._seekTo(e.pos)),r||this.props.playing===e.playing&&this._wavesurfer.isPlaying()===e.playing||(e.playing?this._wavesurfer.play():this._wavesurfer.pause()),this.props.volume!==e.volume&&this._wavesurfer.setVolume(e.volume),this.props.zoom!==e.zoom&&this._wavesurfer.zoom(e.zoom),this.props.options.audioRate!==e.options.audioRate&&this._wavesurfer.setPlaybackRate(e.options.audioRate),this.props.options.backend!==e.options.backend&&(this._wavesurfer.params.backend=e.options.backend),e.responsive&&this.props.responsive!==e.responsive&&window.addEventListener("resize",this._handleResize,!1),e.responsive||this.props.responsive===e.responsive||window.removeEventListener("resize",this._handleResize)}}]),t}(n.n(S).a),w=Object(m.b)(function(e,t){return{waveform:e.waveforms[t.side]}})(y),O=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){if(this.props.isReady){var t,n,r=Object.create(this.props.wavesurfer.regions.list);for(t in e.regions)if({}.hasOwnProperty.call(e.regions,t)){var a=e.regions[t];delete r[t],this.props.wavesurfer.regions.list[t]?!r[t]||r[t].start===a.start&&r[t].end===a.end&&r[t].loop===a.loop&&r[t].color===a.color||e.wavesurfer.regions.list[t].update({start:a.start,end:a.end,loop:a.loop,color:a.color}):this._hookUpRegionEvents(e.wavesurfer.addRegion(a))}for(n in r)({}).hasOwnProperty.call(r,n)&&e.wavesurfer.regions.list[n].remove()}}}]),t}(n(22).a),k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).setAudioRate=function(){var e=n.props.channel.calculatedAudioRate;n.props.waveform.waveformOptions.audioRate!==e&&n.props.setWaveformState("audioRate",e)},n.setLoop=function(){var e=n.props.channel.loop;n.props.waveform.regions.loop.loop!==e&&(n.props.setRegionsState("loop",e),e?n.props.setRegionsState("color","rgba(0,0,225,.3)"):n.props.setRegionsState("color","rgba(225,0,225,.2)"))},n.handlePosChange=function(e){var t=e.originalArgs[0];n.props.setPos(t)},n.handleFinish=function(){n.props.playNextFromQueue()},n.handleRegionUpdateEnd=function(e){var t=e.originalArgs[0].end,r=e.originalArgs[0].start;n.props.setRegionsState("end",t),n.props.setRegionsState("start",r)},n.renderWaveform=function(){return a.a.createElement(w,{side:n.props.side,audioFile:n.props.channel.currentSong.url,playing:n.props.channel.playing,volume:n.props.channel.calculatedVolume,options:n.props.waveform.waveformOptions,pos:n.props.waveform.pos,onPosChange:n.handlePosChange,onFinish:n.handleFinish},a.a.createElement(O,{regions:n.props.waveform.regions,onRegionUpdateEnd:n.handleRegionUpdateEnd}))},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.setAudioRate(),this.setLoop(),a.a.createElement("div",{className:"Waveform"},this.props.channel.currentSong?this.renderWaveform():null)}}]),t}(r.Component),C=Object(m.b)(function(e,t){return{channel:e.channels[t.side],waveform:e.waveforms[t.side]}},function(e,t){return{setPos:function(n){return e(v(t.side,n))},setWaveformState:function(n,r){return e(function(e,t,n){return{type:"SET_WAVEFORM_STATE",side:e,key:t,newValue:n}}(t.side,n,r))},setRegionsState:function(n,r){return e(b(t.side,n,r))}}})(k),j=(n(43),{help:{double:{shift:{"?":function(){this.handleClick()}}}},seek:{single:{1:function(){"left"===this.props.side&&this.seek({forwards:!1,coarse:!0})},2:function(){"left"===this.props.side&&this.seek({forwards:!0,coarse:!0})},9:function(){"right"===this.props.side&&this.seek({forwards:!1,coarse:!0})},0:function(){"right"===this.props.side&&this.seek({forwards:!0,coarse:!0})},q:function(){"left"===this.props.side&&this.props.togglePlaying()},p:function(){"right"===this.props.side&&this.props.togglePlaying()}},double:{shift:{"!":function(){"left"===this.props.side&&this.seek({forwards:!1,coarse:!1})},"@":function(){"left"===this.props.side&&this.seek({forwards:!0,coarse:!1})},"(":function(){"right"===this.props.side&&this.seek({forwards:!1,coarse:!1})},")":function(){"right"===this.props.side&&this.seek({forwards:!0,coarse:!1})},S:function(){if("left"===this.props.side){var e=this.props.waveform.regions.loop.start;this.props.setPos(e)}},L:function(){if("right"===this.props.side){var e=this.props.waveform.regions.loop.start;this.props.setPos(e)}}}}},masterControls:{single:{" ":function(){this.togglePlaying()},ArrowLeft:function(){var e=this.props.crossfade-.1;e>=-1&&this.props.setCrossfade(e)},ArrowRight:function(){var e=this.props.crossfade+.1;e<=1&&this.props.setCrossfade(e)},ArrowUp:function(){var e=this.props.masterBpm+10;e<=300&&this.props.setBpm(e)},ArrowDown:function(){var e=this.props.masterBpm-10;e>0&&this.props.setBpm(e)}},double:{shift:{ArrowLeft:function(){this.props.setCrossfade(-1)},ArrowRight:function(){this.props.setCrossfade(1)},ArrowUp:function(){var e=this.props.masterBpm+1;e<=300&&this.props.setBpm(e)},ArrowDown:function(){var e=this.props.masterBpm-1;e>0&&this.props.setBpm(e)}},meta:{ArrowDown:function(){this.props.setCrossfade(0)}}}},loop:{single:{s:function(){"left"===this.props.side&&this.toggleLoop()},l:function(){"right"===this.props.side&&this.toggleLoop()},e:function(){"left"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!1,coarse:!0})},u:function(){"right"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!1,coarse:!0})},r:function(){"left"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!0,coarse:!0})},i:function(){"right"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!0,coarse:!0})},c:function(){"left"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!1,coarse:!0})},n:function(){"right"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!1,coarse:!0})},v:function(){"left"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!0,coarse:!0})},m:function(){"right"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!0,coarse:!0})},d:function(){"left"===this.props.side&&this.resizeLoop({double:!1,fromStart:!0})},j:function(){"right"===this.props.side&&this.resizeLoop({double:!1,fromStart:!0})},f:function(){"left"===this.props.side&&this.resizeLoop({double:!0,fromStart:!0})},k:function(){"right"===this.props.side&&this.resizeLoop({double:!0,fromStart:!0})}},double:{shift:{E:function(){"left"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!1,coarse:!1})},U:function(){"right"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!1,coarse:!1})},R:function(){"left"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!0,coarse:!1})},I:function(){"right"===this.props.side&&this.moveLoop({moveStart:!0,forwards:!0,coarse:!1})},C:function(){"left"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!1,coarse:!1})},N:function(){"right"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!1,coarse:!1})},V:function(){"left"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!0,coarse:!1})},M:function(){"right"===this.props.side&&this.moveLoop({moveStart:!1,forwards:!0,coarse:!1})},D:function(){"left"===this.props.side&&this.resizeLoop({double:!1,fromStart:!1})},J:function(){"right"===this.props.side&&this.resizeLoop({double:!1,fromStart:!1})},F:function(){"left"===this.props.side&&this.resizeLoop({double:!0,fromStart:!1})},K:function(){"right"===this.props.side&&this.resizeLoop({double:!0,fromStart:!1})}},meta:{}}}});function _(e){var t=this,n=j[e].single||{},r=j[e].double.shift||{},a=j[e].double.meta||{},o=Object.keys(n),s=Object.keys(r),l=Object.keys(a);document.addEventListener("keydown",function(e){"text"!==e.target.type&&"number"!==e.target.type&&(e.preventDefault(),e.shiftKey&&e.metaKey||(e.shiftKey&&!e.metaKey?s.forEach(function(n){e.key===n&&r[n].bind(t)()}):!e.shiftKey&&e.metaKey?l.forEach(function(n){e.key===n&&a[n].bind(t)()}):o.forEach(function(r){e.key===r&&n[r].bind(t)()})))})}var P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).toggleLoop=function(){n.props.setChannelState("loop",!n.props.channel.loop)},n.moveLoop=function(e){var t,r,a,o=e.moveStart,s=e.forwards,l=e.coarse,i=n.props.waveform.regions.loop.start,c=n.props.waveform.regions.loop.end;(t=o?i:c,l)?(r=1,n.props.channel.currentSong&&(r=60/n.props.channel.currentSong.bpm)):r=.1;a=s?t+r:t-r,o?a>=0&&a<c&&n.props.setRegionsState("start",a):a>i&&n.props.setRegionsState("end",a)},n.resizeLoop=function(e){var t=e.double,r=e.fromStart;console.log("resizing",t,r);var a,o=n.props.waveform.regions.loop.start,s=n.props.waveform.regions.loop.end,l=s-o;a=t?2*l:l/2,r?a>.01&&n.props.setRegionsState("end",o+a):a>.01&&s-a>=0&&n.props.setRegionsState("start",s-a)},n.loopHalf=function(){var e=n.props.waveform.regions.loop.start,t=(n.props.waveform.regions.loop.end-e)/2;t>.01&&n.props.setRegionsState("end",e+t)},n.loopDouble=function(){var e=n.props.waveform.regions.loop.start,t=2*(n.props.waveform.regions.loop.end-e);n.props.setRegionsState("end",e+t)},n.renderLoopSettings=function(){return a.a.createElement("div",{className:"loopSettings"},a.a.createElement("div",null,a.a.createElement("label",null,"Loop start"),a.a.createElement("br",null),a.a.createElement("span",null,a.a.createElement("button",{onClick:n.startBack},"<"),a.a.createElement("button",{onClick:n.startForwards},">"))),a.a.createElement("div",null,a.a.createElement("label",null,"Loop length"),a.a.createElement("br",null),a.a.createElement("span",null,a.a.createElement("button",{onClick:n.loopHalf},"/2"),a.a.createElement("button",{onClick:n.loopDouble},"\xd72"))),a.a.createElement("div",null,a.a.createElement("label",null,"Loop end"),a.a.createElement("br",null),a.a.createElement("span",null,a.a.createElement("button",{onClick:n.endBack},"<"),a.a.createElement("button",{onClick:n.endForwards},">"))))},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Loop"},a.a.createElement("label",null,"Loop"),a.a.createElement("input",{type:"checkbox",checked:this.props.channel.loop,onChange:this.toggleLoop}),this.renderLoopSettings())}},{key:"componentDidMount",value:function(){_.bind(this)("loop")}}]),t}(r.Component),R=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).playPause=function(){return n.props.channel.playing?"Pause":"Play"},n.seek=function(e){var t,r,a=e.forwards,o=e.coarse,s=n.props.waveform.pos;o?(t=1,n.props.channel.currentSong&&(t=60/n.props.channel.currentSong.bpm)):t=.1;(r=a?s+t:s-t)>0?n.props.setPos(r):n.props.setPos(0)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Seek"},a.a.createElement("button",{onClick:this.back},"<<"),a.a.createElement("button",{onClick:this.props.togglePlaying,className:"play-pause"},this.playPause()),a.a.createElement("button",{onClick:this.forwards},">>"))}},{key:"componentDidMount",value:function(){_.bind(this)("seek")}}]),t}(r.Component),F=function(e){return a.a.createElement("div",{className:"Volume"},a.a.createElement("label",null,"Volume"),a.a.createElement("br",null),a.a.createElement("input",{type:"range",orient:"vertical",min:"0",max:"1",step:".01",value:e.volume,onChange:function(t){e.setVolume(parseFloat(t.target.value))}}))},L=function(e){var t=function(t){e.setBpmFactor(t.target.name)};return a.a.createElement("div",{className:"DoubleHalf"},function(){var t="".concat(e.bpmFactor," \xd7");switch(e.bpmFactor){case.125:t="\u215b";break;case.25:t="\xbc";break;case.5:t="\xbd"}return"".concat(t," speed")}(),a.a.createElement("div",{className:"double-half-buttons"},a.a.createElement("button",{name:"half",onClick:t},"/2"),a.a.createElement("button",{name:"original",onClick:t},"original"),a.a.createElement("button",{name:"double",onClick:t},"\xd72")))},T=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Controls"},a.a.createElement("div",{className:"toggles"},a.a.createElement("div",{className:"top"},a.a.createElement("div",{className:"buttons"},a.a.createElement(R,{side:this.props.side,channel:this.props.channel,waveform:this.props.waveform,togglePlaying:this.props.togglePlaying,setPos:this.props.setPos,setRegionsState:this.props.setRegionsState}),a.a.createElement("button",{onClick:this.props.syncBpm},"Sync master")),a.a.createElement("div",{className:"checkboxes"},a.a.createElement(P,{side:this.props.side,channel:this.props.channel,waveform:this.props.waveform,setChannelState:this.props.setChannelState,setRegionsState:this.props.setRegionsState}))),a.a.createElement(L,{bpmFactor:this.props.bpmFactor,setBpmFactor:this.props.setBpmFactor})),a.a.createElement("div",{className:"sliders"},a.a.createElement(F,{volume:this.props.volume,setVolume:this.props.setVolume})))}}]),t}(r.Component),B=Object(m.b)(function(e,t){return{channel:e.channels[t.side],waveform:e.waveforms[t.side]}},function(e,t){return{setChannelState:function(n,r){return e(g(t.side,n,r))},setPos:function(n){return e(v(t.side,n))},setRegionsState:function(n,r){return e(b(t.side,n,r))}}})(T),N=n(10),A=n(23),Q=n.n(A),x=(n(45),function(e){var t=e.song,n=e.removeFromQueue,r=e.setCurrentSong;return a.a.createElement("li",{className:"QueueSong"},a.a.createElement("span",{className:"drag"},"\u2630"),a.a.createElement("span",null,a.a.createElement("button",{onClick:function(e){n(t),r(t)}},"Load"),a.a.createElement("button",{onClick:function(e){n(t)}},"Remove")),t.title)}),D=n(17),V=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderQueue=function(){return n.props.queue.map(function(e){return a.a.createElement(x,{song:e,key:D(),removeFromQueue:n.removeFromQueue,setCurrentSong:n.props.setCurrentSong})})},n.removeFromQueue=function(e){var t=n.props.side,r=Object(N.a)(n.props.queue).filter(function(t){return t!==e});n.props.setSideQueue(t,r)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Queue"},a.a.createElement("ul",{id:"".concat(this.props.side,"-queue")},this.renderQueue()))}},{key:"componentDidMount",value:function(){var e=document.getElementById("".concat(this.props.side,"-queue"));Q.a.create(e,{animation:150,handle:".drag"})}}]),t}(r.Component),U=Object(m.b)(function(e,t){return{queue:e.queues[t.side]}},function(e,t){return{setSideQueue:function(t,n){return e(function(e,t){return{type:"SET_SIDE_QUEUE",side:e,queue:t}}(t,n))}}})(V),q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).setVolume=function(e){n.props.setChannelState("volume",e)},n.setBpmFactor=function(e){var t=n.props.channel.bpmFactor;switch(e){case"double":t*=2;break;case"half":t/=2;break;default:t=1}t>=.125&&t<=8&&n.props.setChannelState("bpmFactor",t)},n.setCurrentSong=function(e){n.props.setChannelState("currentSong",null),n.props.revertToDefault(),n.props.setChannelState("currentSong",e),n.props.setPos(0)},n.togglePlaying=function(){n.props.channel.currentSong?n.props.setPlaying(!n.props.channel.playing):n.props.queue[0]&&(n.props.setPlaying(!n.props.channel.playing),n.playNextFromQueue())},n.togglePitchShift=function(){n.props.setChannelState("pitchShift",!n.props.channel.pitchShift)},n.playNextFromQueue=function(){if(n.props.queue[0]){var e=n.props.queue[0];n.props.setChannelState("currentSong",e),n.props.shiftFromQueue()}else n.props.setChannelState("currentSong",null),n.props.setPlaying(!1)},n.calculateAudioVolume=function(){var e,t=n.props.channel.volume,r=parseFloat(n.props.crossfade),a=n.props.side;e=r>0&&"left"===a?t*(1-r):r<0&&"right"===a?t*(1+r):t,n.props.channel.calculatedVolume!==e&&n.props.setChannelState("calculatedVolume",e)},n.calculateAudioRate=function(){var e=n.props.masterBpm/n.props.channel.currentSong.bpm,t=n.props.channel.bpmFactor;e>.1&&n.props.channel.calculatedAudioRate!==e*t&&n.props.setChannelState("calculatedAudioRate",e*t)},n.syncBpm=function(){n.props.channel.currentSong&&n.props.setBpm(n.props.channel.currentSong.bpm)},n.setInitialBpm=function(){n.props.masterBpm||n.syncBpm()},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.channel.currentSong&&(this.setInitialBpm(),this.calculateAudioVolume(),this.calculateAudioRate()),a.a.createElement("div",{className:"Channel ".concat(this.props.side)},a.a.createElement("div",{className:"controls"},a.a.createElement("h2",null,this.props.channel.currentSong?"".concat(this.props.channel.currentSong.title," (").concat(parseInt(this.props.channel.currentSong.bpm)," bpm)"):"No song playing"),a.a.createElement(C,{side:this.props.side,playNextFromQueue:this.playNextFromQueue}),a.a.createElement(B,{side:this.props.side,togglePlaying:this.togglePlaying})),a.a.createElement(U,{side:this.props.side,setCurrentSong:this.setCurrentSong}))}}]),t}(r.Component),I=Object(m.b)(function(e,t){return{masterBpm:e.masterBpm,crossfade:e.crossfade,channel:e.channels[t.side],waveform:e.waveforms[t.side],queue:e.queues[t.side]}},function(e,t){return{setBpm:function(t){return e(h(t))},setCrossfade:function(t){return e(d(t))},setChannelState:function(n,r){return e(g(t.side,n,r))},revertToDefault:function(){return e({type:"REVERT_TO_DEFAULT"})},setRegionsState:function(n,r){return e(b(t.side,n,r))},setPlaying:function(n){return e(E(t.side,n))},shiftFromQueue:function(){return e(f(t.side))},setPos:function(n){return e(v(t.side,n))}}})(q),M=(n(49),n(51),function(e){var t=e.masterPlaying,n=e.togglePlaying;return a.a.createElement("div",{className:"MasterPlayPause"},a.a.createElement("button",{onClick:n},t()?"Pause":"Play"))}),z=function(e){var t=e.crossfade,n=e.setCrossfade;return a.a.createElement("div",{className:"Crossfader"},a.a.createElement("label",null,"Crossfader"),a.a.createElement("br",null),a.a.createElement("input",{id:"crossfader",type:"range",min:"-1",max:"1",step:".01",value:t,onChange:function(e){n(e.target.value)}}))},H=function(e){var t=e.masterBpm,n=e.setBpm,r=function(e){n(parseInt(e.target.value))};return a.a.createElement("div",{className:"Bpm"},a.a.createElement("label",null,"BPM:"),a.a.createElement("input",{id:"bpmValue",type:"number",min:"1",max:"300",step:"1",value:t,onChange:r}),a.a.createElement("br",null),a.a.createElement("input",{id:"bpmSlider",type:"range",min:"1",max:"300",step:"1",value:t,onChange:r}))},W=function(){return a.a.createElement("div",{className:"Info hidden"},a.a.createElement("h3",null,"Keyboard shortcuts:"),a.a.createElement("ul",null,a.a.createElement("span",null,a.a.createElement("li",null,a.a.createElement("strong",null,"?"),": open help menu"),a.a.createElement("br",null),a.a.createElement("label",null,"Master controls"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"Space"),": play/pause master"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"\u2190"),", ",a.a.createElement("strong",null,"\u2192"),": crossfade left/right",a.a.createElement("br",null),a.a.createElement("em",null,"(with ",a.a.createElement("strong",null,"Shift"),": fine crossfade)")),a.a.createElement("li",null,a.a.createElement("strong",null,"Cmd")," + ",a.a.createElement("strong",null,"\u2193"),": crossfade to center"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"\u2191"),", ",a.a.createElement("strong",null,"\u2193"),": BPM up/down",a.a.createElement("br",null),a.a.createElement("em",null,"(with ",a.a.createElement("strong",null,"Shift"),": fine adjust")),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"Q"),", ",a.a.createElement("strong",null,"P"),": play/pause left/right"),a.a.createElement("li",null,a.a.createElement("strong",null,"S"),", ",a.a.createElement("strong",null,"L"),": toggle looping left/right"),a.a.createElement("br",null),a.a.createElement("label",null,"Seek forwards/backwards"),a.a.createElement("br",null),a.a.createElement("em",null,"(with ",a.a.createElement("strong",null,"Shift"),": fine adjust)"),a.a.createElement("li",null,a.a.createElement("strong",null,"1"),", ",a.a.createElement("strong",null,"9"),": seek backwards"),a.a.createElement("li",null,a.a.createElement("strong",null,"2"),", ",a.a.createElement("strong",null,"0"),": seek forwards")),a.a.createElement("span",null,a.a.createElement("label",null,"Loop controls"),a.a.createElement("br",null),a.a.createElement("em",null,"(with ",a.a.createElement("strong",null,"Shift"),": fine adjust)"),a.a.createElement("li",null,a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"S"),", ",a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"L"),": jump to loop start"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"E"),", ",a.a.createElement("strong",null,"U"),": nudge loop start backwards"),a.a.createElement("li",null,a.a.createElement("strong",null,"R"),", ",a.a.createElement("strong",null,"I"),": nudge loop start forwards"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"C"),", ",a.a.createElement("strong",null,"N"),": nudge loop end backwards"),a.a.createElement("li",null,a.a.createElement("strong",null,"V"),", ",a.a.createElement("strong",null,"M"),": nudge loop end forwards"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"D"),", ",a.a.createElement("strong",null,"J"),": halve loop"),a.a.createElement("li",null,a.a.createElement("strong",null,"F"),", ",a.a.createElement("strong",null,"K"),": double loop"),a.a.createElement("br",null),a.a.createElement("li",null,a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"D"),", ",a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"J"),": halve loop from end"),a.a.createElement("li",null,a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"F"),", ",a.a.createElement("strong",null,"Shift")," + ",a.a.createElement("strong",null,"K"),": double loop from end"))),a.a.createElement("hr",null),a.a.createElement("h3",null,"DJin"),a.a.createElement("p",null,"was created by ",a.a.createElement("a",{href:"https://github.com/yapjinai"},"Jin Ai Yap"),"."))},K=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={shown:!1},n.setInfoVisibility=function(){var e=document.querySelector(".help"),t=document.querySelector(".Info");e&&t&&(n.state.shown?(e.innerText="x",t.classList.remove("hidden")):(e.innerText="?",t.classList.add("hidden")))},n.handleClick=function(e){e&&e.preventDefault(),n.state.shown?n.setState({shown:!1}):n.setState({shown:!0})},n.clearHelpOnClick=function(){var e=document.querySelector(".help"),t=document.querySelector(".Info");document.addEventListener("click",function(r){n.state.shown&&r.target!==t&&r.target!==e&&r.target.parentElement!==t&&r.target.parentElement!==e&&r.target.parentElement.parentElement!==t&&r.target.parentElement.parentElement!==e&&r.target.parentElement.parentElement.parentElement!==t&&r.target.parentElement.parentElement.parentElement!==e&&n.setState({shown:!1})}),document.addEventListener("keydown",function(e){" "!==e.key&&n.setState({shown:!1})})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.setInfoVisibility(),a.a.createElement("div",{className:"Help"},a.a.createElement("button",{className:"help",onClick:this.handleClick},"?"),a.a.createElement(W,null))}},{key:"componentDidMount",value:function(){this.clearHelpOnClick(),_.bind(this)("help")}}]),t}(r.Component),G=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).masterPlaying=function(){return n.props.leftPlaying||n.props.rightPlaying},n.togglePlaying=function(){n.masterPlaying()?(n.props.setPlaying("left",!1),n.props.setPlaying("right",!1)):["left","right"].forEach(function(e){if(n.props.channels[e].currentSong)n.props.setPlaying(e,!0);else if(n.props.queues[e][0]){n.props.setChannelState(e,"playing",!0);var t=n.props.queues[e][0];n.props.shiftFromQueue(e),n.props.setChannelState(e,"currentSong",t)}})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("span",{className:"MasterControls",style:{display:"flex"}},a.a.createElement(M,{togglePlaying:this.togglePlaying,masterPlaying:this.masterPlaying}),a.a.createElement(z,{crossfade:this.props.crossfade,setCrossfade:this.props.setCrossfade}),a.a.createElement(H,{masterBpm:this.props.masterBpm,setBpm:this.props.setBpm}),a.a.createElement(K,null))}},{key:"componentDidMount",value:function(){_.bind(this)("masterControls")}}]),t}(r.Component),J=Object(m.b)(function(e,t){return{masterBpm:e.masterBpm,crossfade:e.crossfade,leftPlaying:e.channels.left.playing,rightPlaying:e.channels.right.playing,channels:e.channels,queues:e.queues}},function(e,t){return{setBpm:function(t){return e(h(t))},setCrossfade:function(t){return e(d(t))},setChannelState:function(t,n,r){return e(g(t,n,r))},shiftFromQueue:function(t){return e(f(t))},setPlaying:function(t,n){return e(E(t,n))}}})(G),Y=(n(53),function(e){var t=e.song,n=e.pushToQueue,r=e.browserFilterQuery,o=e.setBrowserFilterQuery,s=function(e){n(e.target.name,t)};return a.a.createElement("tr",{className:"BrowserSong"},a.a.createElement("td",{className:"queue"},a.a.createElement("button",{name:"left",onClick:s},"L"),a.a.createElement("button",{name:"right",onClick:s},"R")),a.a.createElement("td",{className:"title"},t.title),a.a.createElement("td",{className:"artist",onClick:function(e){r!==e.target.innerHTML?o(e.target.innerHTML):o("")}},t.artist),a.a.createElement("td",{className:"bpm"},parseInt(t.bpm)))}),X=n(17),$="https://djin-api.herokuapp.com",Z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).fetchAllSongs=function(){fetch("".concat($,"/songs")).then(function(e){return e.json()}).then(function(t){fetch("".concat($,"/uploaded_songs")).then(function(e){return e.json()}).then(function(n){e.props.setAllSongs(t.concat(n))})})},e.renderAllSongs=function(){return e.props.filteredSongs.map(function(t){return a.a.createElement(Y,{song:t,key:X(),pushToQueue:e.props.pushToQueue,setBrowserFilterQuery:e.setBrowserFilterQuery,browserFilterQuery:e.state.browserFilterQuery})})},e.handleChange=function(t){e.setBrowserFilterQuery(t.target.value)},e.handleCheckboxChange=function(t){if(t.target.checked){var n=Object(N.a)(e.state.tags);n.push(t.target.name),e.setState({tags:n})}else{var r=e.state.tags.filter(function(e){return e!==t.target.name});e.setState({tags:r})}},e.setBrowserFilterQuery=function(t){e.setState({browserFilterQuery:t})},e.clearQueries=function(){e.setBrowserFilterQuery(""),e.setState({tags:[]}),document.querySelectorAll("[type=checkbox]").forEach(function(e){e.checked=!1})},e.filterSongs=function(){var t=e.props.allSongs.filter(function(t){var n=e.state.browserFilterQuery.toLowerCase().split(" ").join(""),r=t.title.toLowerCase().split(" ").join(""),a=t.artist.toLowerCase().split(" ").join(""),o=t.tags,s=!0;return e.state.tags.forEach(function(e){o.includes(e)||(s=!1)}),(r.includes(n)||a.includes(n))&&s});e.props.filteredSongs.length!==t.length&&e.props.setFilteredSongs(t)},e.sortSongs=function(){var t=e.props.sortBy,n=e.props.filteredSongs.sort(function(e,n){var r=e[t],a=n[t];return"bpm"===t?r-a:r.toLowerCase().localeCompare(a.toLowerCase())}),r=n;e.props.reverseSort&&(r=n.reverse()),e.props.filteredSongs!==r&&e.props.setFilteredSongs(r)},e.sortByClass=function(t){return e.props.sortBy===t?"sortedBy":null},e.handleClick=function(t){e.props.sortBy!==t.target.id?(e.props.setSortBy(t.target.id),e.props.setReverseSort(!1)):e.props.setReverseSort(!e.props.reverseSort)},e.state={browserFilterQuery:"",tags:[]},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.filterSongs(),this.sortSongs(),a.a.createElement("div",{className:"Browser"},a.a.createElement("span",{className:"filter"},a.a.createElement("div",{className:"genres"},a.a.createElement("div",{className:"genre pop"},a.a.createElement("label",{htmlFor:"pop"},"Pop"),a.a.createElement("input",{type:"checkbox",name:"pop",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre house"},a.a.createElement("label",{htmlFor:"house"},"House"),a.a.createElement("input",{type:"checkbox",name:"house",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre trap"},a.a.createElement("label",{htmlFor:"trap"},"Trap"),a.a.createElement("input",{type:"checkbox",name:"trap",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre rnb"},a.a.createElement("label",{htmlFor:"rnb"},"R&B"),a.a.createElement("input",{type:"checkbox",name:"rnb",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre hiphop"},a.a.createElement("label",{htmlFor:"hiphop"},"Hip Hop"),a.a.createElement("input",{type:"checkbox",name:"hiphop",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre weird"},a.a.createElement("label",{htmlFor:"weird"},"Weird"),a.a.createElement("input",{type:"checkbox",name:"weird",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre beat"},a.a.createElement("label",{htmlFor:"beat"},"Beat-heavy"),a.a.createElement("input",{type:"checkbox",name:"beat",onChange:this.handleCheckboxChange})),a.a.createElement("div",{className:"genre flatiron"},a.a.createElement("label",{htmlFor:"flatiron"},":)"),a.a.createElement("input",{type:"checkbox",name:"flatiron",onChange:this.handleCheckboxChange}))),a.a.createElement("input",{type:"text",placeholder:"Search",value:this.state.browserFilterQuery,onChange:this.handleChange}),a.a.createElement("button",{onClick:this.clearQueries},"Clear")),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{id:"queue"},"Queue"),a.a.createElement("th",{id:"title",className:this.sortByClass("title"),onClick:this.handleClick},"Title"),a.a.createElement("th",{id:"artist",className:this.sortByClass("artist"),onClick:this.handleClick},"Artist"),a.a.createElement("th",{id:"bpm",className:this.sortByClass("bpm"),onClick:this.handleClick},"BPM"))),a.a.createElement("tbody",null,this.renderAllSongs())))}},{key:"componentDidMount",value:function(){this.fetchAllSongs()}}]),t}(r.Component),ee=Object(m.b)(function(e,t){return{allSongs:e.allSongs,filteredSongs:e.filteredSongs,sortBy:e.sortBy,reverseSort:e.reverseSort}},function(e,t){return{setAllSongs:function(t){return e(function(e){return{type:"SET_ALL_SONGS",allSongs:e}}(t))},setFilteredSongs:function(t){return e(function(e){return{type:"SET_FILTERED_SONGS",filteredSongs:e}}(t))},setSortBy:function(t){return e(function(e){return{type:"SET_SORT_BY",sortBy:e}}(t))},setReverseSort:function(t){return e(function(e){return{type:"SET_REVERSE_SORT",reverseSort:e}}(t))},pushToQueue:function(t,n){return e(function(e,t){return{type:"PUSH_TO_QUEUE",side:e,song:t}}(t,n))}}})(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Master",style:{display:"flex"}},a.a.createElement(J,null),a.a.createElement(ee,{pushToQueue:this.props.pushToQueue}))}}]),t}(r.Component),ne=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(I,{side:"left"}),a.a.createElement(te,null),a.a.createElement(I,{side:"right"}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=n(11),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BPM":return t.bpm;default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CROSSFADE":return t.crossfade;default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_SONGS":return t.allSongs;default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTERED_SONGS":return t.filteredSongs;default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bpm",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_BY":return t.sortBy;default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_REVERSE_SORT":return t.reverseSort;default:return e}},ue=n(6),pe={left:[],right:[]},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIDE_QUEUE":var n=Object(ue.a)({},e);return n[t.side]=t.queue,n;case"PUSH_TO_QUEUE":if(e[t.side].includes(t.song))return e;var r=Object(ue.a)({},e),a=Object(N.a)(e[t.side]);return a.push(t.song),r[t.side]=a,r;case"SHIFT_FROM_QUEUE":var o=Object(ue.a)({},e),s=Object(N.a)(e[t.side]);return s.shift(),o[t.side]=s,o;default:return e}},he=n(9),de={currentSong:null,playing:!1,volume:.5,bpmFactor:1,calculatedVolume:.5,calculatedAudioRate:1,pitchShift:!0,loop:!1},fe={left:Object(ue.a)({},de),right:Object(ue.a)({},de)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL_STATE":return Object(ue.a)({},e,Object(he.a)({},t.side,Object(ue.a)({},e[t.side],Object(he.a)({},t.key,t.newValue))));case"SET_PLAYING":return Object(ue.a)({},e,Object(he.a)({},t.side,Object(ue.a)({},e[t.side],{playing:t.playing})));default:return e}},Ee={pos:0,waveformOptions:{audioRate:1,backend:"WebAudio",height:128,fillParent:!1,scrollParent:!0,interact:!0},regions:{loop:{id:"loop",start:0,end:4,loop:!1,color:"rgba(0,0,225,.1)"}}},ve={left:Object(ue.a)({},Ee),right:Object(ue.a)({},Ee)},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVERT_TO_DEFAULT":return ve;case"SET_POS":return Object(ue.a)({},e,Object(he.a)({},t.side,Object(ue.a)({},e[t.side],{pos:t.pos})));case"SET_WAVEFORM_STATE":return Object(ue.a)({},e,Object(he.a)({},t.side,Object(ue.a)({},e[t.side],{waveformOptions:Object(ue.a)({},e[t.side].waveformOptions,Object(he.a)({},t.key,t.newValue))})));case"SET_REGIONS_STATE":return Object(ue.a)({},e,Object(he.a)({},t.side,Object(ue.a)({},e[t.side],{regions:{loop:Object(ue.a)({},e[t.side].regions.loop,Object(he.a)({},t.key,t.newValue))}})));default:return e}},Se=Object(re.b)({masterBpm:ae,crossfade:oe,allSongs:se,filteredSongs:le,sortBy:ie,reverseSort:ce,queues:me,channels:ge,waveforms:be}),ye=Object(re.c)(Se,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(a.a.createElement(m.a,{store:ye},a.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.4d70af6e.chunk.js.map